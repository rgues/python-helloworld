{"version":3,"sources":["./src/app/dashboard/my-tontines/tontine-detail/debts/due/due.page.scss","./src/app/dashboard/my-tontines/tontine-detail/debts/due/due.page.ts","./src/app/dashboard/my-tontines/tontine-detail/debts/due/due.page.html","./src/app/dashboard/my-tontines/tontine-detail/debts/due/due.module.ts"],"names":[],"mappings":"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","file":"due-due-module.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkdWUucGFnZS5zY3NzIn0= */\";","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { PopoverController, IonInfiniteScroll } from '@ionic/angular';\r\nimport { DebtsMenuComponent } from '../debts-menu/debts-menu.component';\r\nimport { DebtsManagerService } from '../../../services/debts-manager.service';\r\nimport { ContributionService } from '../../../services/contribution.service';\r\nimport { TontineService } from '../../../services/tontine.service';\r\nimport { ErrorService } from 'src/app/shared/service/error.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { UtilService } from 'src/app/shared/service/util.service';\r\nimport { UiService } from 'src/app/shared/service/ui.service';\r\n\r\n@Component({\r\n  selector: 'app-due',\r\n  templateUrl: './due.page.html',\r\n  styleUrls: ['./due.page.scss'],\r\n})\r\nexport class DuePage implements OnInit {\r\n\r\n  tontineCurrency = 'ZAR';\r\n  totalPay = 0;\r\n  totalBill = 0;\r\n  totalDue = 0;\r\n  balance = 0;\r\n  selectedDebts = [];\r\n  contributions: any;\r\n  penalties:any;\r\n  myDebts: any[] = [];\r\n  allCurrencies:any;\r\n  currentCurrency:any;\r\n  reference: string;\r\n  itemsData: any;\r\n  itemsList: any;\r\n  loadingPay: boolean;\r\n  typesContributions: any;\r\n\r\n  loading: boolean;\r\n  currentTontine: any;\r\n  currentSeance: any;\r\n  currentCycle: any;\r\n  members: any;\r\n  allData: any;\r\n  nbItems: number;\r\n  @ViewChild(IonInfiniteScroll,{static: false}) infiniteScroll: IonInfiniteScroll;\r\n\r\n  constructor(\r\n    private popoverController: PopoverController,\r\n    private tontine: TontineService,\r\n    private translate: TranslateService,\r\n    private ui: UiService,\r\n    private error: ErrorService,\r\n    private debt: DebtsManagerService,\r\n    private contribution: ContributionService,\r\n    private route: Router,\r\n    private util: UtilService\r\n  ) {\r\n      this.loading = false;\r\n      this.contributions = [];\r\n      this.allData = [];\r\n      this.penalties = [];\r\n      this.currentTontine = this.tontine.getCurrentTontineData();\r\n      this.currentSeance = this.currentTontine.seance_courante;\r\n      this.currentCycle = this.currentTontine.cycle_courant;\r\n      this.members = this.currentTontine.membres;\r\n      this.nbItems = 10;\r\n      this.allCurrencies = [];\r\n      this.itemsData = [];\r\n      this.loadingPay = false;\r\n      this.myDebts = [];\r\n      this.typesContributions = [];\r\n      this.itemsList = [];\r\n   }\r\n\r\n  ngOnInit() {\r\n    this.loading = true;\r\n    this.getCurrentSeance();\r\n    this.getSeances(null);\r\n    this.getContributionType(false);\r\n  }\r\n\r\n  // Get the current seance of tontine\r\n  getCurrentSeance(){\r\n    this.contribution.getSeanceCurrentTontine(this.currentTontine.tontine.tontine_id).subscribe((reponse: any) =>{\r\n      if (reponse && reponse.message === 'success') {\r\n        this.currentSeance = reponse.seance;\r\n      }\r\n    }, error => {\r\n        this.error.manageError(error);\r\n    });\r\n  }\r\n\r\n  async openContextMenu(ev: any) {\r\n    const popover = await this.popoverController.create({\r\n      component: DebtsMenuComponent,\r\n      event: ev\r\n    });\r\n    return await popover.present();\r\n  }\r\n\r\n  checkEvent(e, index:any){\r\n    if (e.target.checked == true) {\r\n      this.selectedDebts[index].choice = true;\r\n   \r\n    } else {\r\n      this.selectedDebts[index].choice = false;\r\n    }\r\n    this.totalPay = 0;\r\n    this.totalBill = 0;\r\n    this.balance  = 0;\r\n    this.totalDue = 0;\r\n    this.itemsData = [];\r\n    this.itemsList = [];\r\n    this.selectedDebts.forEach(item => {\r\n      this.totalDue  += parseFloat(item.value.montant);\r\n      if (item.choice) {\r\n        this.itemsList.push(item.value);\r\n        this.totalPay  += parseFloat(item.value.montant);\r\n        this.itemsData.push({seance_id: item.value.seance_id, numero_part: item.value.numero_part, montant: item.value.montant, typecontribution_id: item.value.typecontribution_id});\r\n      }\r\n    });\r\n    this.balance = this.totalPay;\r\n    // formattage de la monnaie\r\n    this.totalPay = parseFloat(Number(this.totalPay).toFixed(2));\r\n    this.totalDue =  parseFloat(Number(this.totalDue).toFixed(2));\r\n    this.balance =  parseFloat(Number(this.balance).toFixed(2));\r\n  }\r\n\r\n  processPayment() {\r\n    // Go to the payment process\r\n    this.debt.sendDebtsData({\r\n      items : this.itemsData, \r\n      itemsList:  this.itemsList,\r\n      balance: this.balance,\r\n      dueAmount: this.totalDue,\r\n      billAmount: this.totalPay,\r\n      dueList: this.allData,\r\n      dueSelect: this.selectedDebts\r\n    });\r\n    this.route.navigate(['/', 'dashboard', 'my-tontines', this.currentTontine.tontine.tontine_id, 'debts','in-progress-paiement']);\r\n  }\r\n\r\n  // debts in progress\r\n  debtInProgress() {\r\n    this.route.navigate(['/', 'dashboard', 'my-tontines', this.currentTontine.tontine.tontine_id, 'debts','in-progress-list']);\r\n  }\r\n\r\n  // get the current contribution\r\n  getContributionType(refresh) {\r\n    this.contribution.getTypeContributionTontine(refresh).then((data: any)=> {\r\n      this.typesContributions = [];\r\n      data.forEach(contrib => {\r\n        this.translate.get(`TYPE_CONTRIBUTION_${contrib.id}`).subscribe(trans=> {\r\n          this.typesContributions.push({id:contrib.id ,value:trans});\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  // get the current desscirption\r\n  getDescription(typeContribId: any) {\r\n    let des = '';\r\n    this.typesContributions.forEach(contrib => {\r\n        if (contrib.id === typeContribId ) {\r\n          des = contrib.value;\r\n        }\r\n    });\r\n    return des;\r\n  }\r\n\r\n  // Get the list of item with amount greather than 0\r\n  filterItems(itemsList: any[]) {\r\n    let dataList = [];\r\n    if (itemsList && itemsList.length > 0) {\r\n      dataList = itemsList.filter((current) => { return current.montant > 0 && current.cycle_id === this.currentCycle.id});\r\n    }\r\n    return dataList;\r\n  }\r\n\r\n  // Get the list of seances that member hasn't contrib\r\n  getSeances(event) {\r\n    const param = {\r\n      tontine_id : this.tontine.getCurrentTontineData().tontine.tontine_id\r\n    }\r\n    this.contribution.getSeancesContributeOrPenalties(param).subscribe((reponse: any) => {\r\n    \r\n      if(reponse && reponse.message === 'success') {\r\n        let dueDatta : any[] =[];\r\n        dueDatta = dueDatta.concat(this.util.orderByKeyUp(this.filterItems(reponse.liste_seances_contribution),'date_debut'));\r\n        dueDatta = dueDatta.concat(this.util.orderByKeyUp(this.filterItems(reponse.liste_seances_penalite),'date_debut'));\r\n        this.allData = dueDatta;\r\n        this.selectedDebts = [];\r\n        this.allData.forEach(data => {\r\n          this.selectedDebts.push({choice: false, value : data});\r\n        });\r\n\r\n        if (this.allData.length > this.nbItems) {\r\n          this.myDebts = [];\r\n          for (let i = 0; i < this.nbItems; i++) {\r\n            this.myDebts.push(this.allData[this.myDebts.length]);\r\n          }\r\n        } else {\r\n          this.myDebts = this.allData;\r\n        }\r\n      }\r\n      this.loading = false;\r\n      if (event) {\r\n        setTimeout(() => {\r\n          event.target.complete();\r\n        }, 2000);\r\n      }\r\n    }, error => {\r\n      this.loading = false;\r\n      if (event) {\r\n          event.target.complete();\r\n      }\r\n      if(error && error.error && error.error.user_not_found) {\r\n          this.loading = true;\r\n          this.error.renewSession().then((data: any) => {\r\n            if (data && data.result === 'OK'){\r\n              this.getSeances(event);\r\n            } else {\r\n              this.loading = false;\r\n            }\r\n          });\r\n      } else if (error && error.error && error.error.tontine_id_not_exist) {\r\n            this.translate.get('TONTINE_USERS_MSG4').subscribe(trans => {\r\n                this.ui.presentToast(trans);\r\n            });\r\n     } else {\r\n          this.error.manageError(error);\r\n      }\r\n    });\r\n  }\r\n\r\n    // Refresh the list\r\n    refreSher(event) {\r\n      this.infiniteScroll.disabled = false;\r\n      this.getSeances(event);\r\n    }\r\n  \r\n    // Infinite scroll data\r\n    infinteScrollData(event) {\r\n      setTimeout(() => {\r\n        for (let i = 0; i < this.nbItems; i++) {\r\n          if (this.myDebts.length < this.allData.length) {\r\n            this.myDebts.push(this.allData[this.myDebts.length]);\r\n          } else if (this.myDebts.length === this.allData.length) {\r\n            event.target.disabled = true;\r\n          }\r\n        }\r\n        event.target.complete();\r\n      }, 500);\r\n   \r\n    }\r\n\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button color=\\\"primary\\\" [defaultHref]=\\\"'/dashboard/my-tontines/'+ currentTontine.tontine.tontine_id\\\" slot=\\\"text-only\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-avatar slot=\\\"start\\\">\\r\\n        <ion-img [src]=\\\"'assets/join-icon.svg'\\\" class=\\\"thumb-img\\\"></ion-img>\\r\\n    </ion-avatar>\\r\\n    <ion-title class=\\\"no-padding\\\">\\r\\n     {{ 'DEBTS_DUE' | translate }}\\r\\n    </ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"openContextMenu($event)\\\">\\r\\n        <ion-icon name=\\\"ellipsis-vertical\\\" color=\\\"primary\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"debts-due\\\">\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refreSher($event)\\\">\\r\\n    <ion-refresher-content\\r\\n      pullingIcon=\\\"reload-outline\\\"\\r\\n      refreshingSpinner=\\\"circles\\\"\\r\\n      refreshingText=\\\"{{ 'M_REFRESHING_TEXT' | translate }}\\\">\\r\\n    </ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"12\\\" class=\\\"ion-no-padding\\\">\\r\\n        <ion-card class=\\\"block-1\\\">\\r\\n          <ion-card-content class=\\\"ion-text-center\\\">\\r\\n            <ion-row>\\r\\n              <ion-col size=\\\"6\\\" class=\\\"col-button\\\">\\r\\n                  <div class=\\\"desc\\\">{{ 'TONTINE_LIST_TEXT2' | translate }}</div>\\r\\n                  <div class=\\\"menu-amount\\\"> {{currentSeance && currentSeance.date_debut ? (currentSeance.date_debut.split(' ')[0] | date :'mediumDate') : ('TONTINE_LIST_CONFIG' | translate) }}</div>\\r\\n              </ion-col>\\r\\n              <ion-col size=\\\"6\\\" class=\\\"col-button\\\">\\r\\n                  <div class=\\\"desc\\\">{{ 'TONTINE_LIST_TEXT5' | translate }}</div>\\r\\n                  <div class=\\\"menu-amount\\\"> \\r\\n                    <span *ngIf=\\\"members && members.prochain_a_bouffer.length === 0\\\">{{ 'TONTINE_LIST_TEXT6' | translate }}</span> \\r\\n                    <span *ngFor=\\\"let beneficiary of members.prochain_a_bouffer\\\">\\r\\n                     {{beneficiary.lastname}}  {{beneficiary.firstname ? beneficiary.firstname : beneficiary.phone}}<br/>\\r\\n                </span></div>\\r\\n              </ion-col>\\r\\n            </ion-row>\\r\\n            <ion-row>\\r\\n              <ion-col size=\\\"6\\\" class=\\\"col-button\\\">\\r\\n                <div class=\\\"desc\\\">{{ 'CYCLE_TEXT' | translate }}</div>\\r\\n                <div class=\\\"menu-amount\\\">{{currentCycle && currentCycle.numerocycle? currentCycle.numerocycle : ('TONTINE_LIST_CONFIG' | translate) }}</div>\\r\\n              </ion-col>\\r\\n              <ion-col size=\\\"6\\\" class=\\\"col-button\\\">\\r\\n                <div class=\\\"desc\\\">{{ 'POOL_TEXT' | translate }}</div>\\r\\n                <div class=\\\"menu-amount\\\">{{currentSeance && currentSeance.numero_seance ? currentSeance.numero_seance : ('TONTINE_LIST_CONFIG' | translate)}}</div>\\r\\n              </ion-col>\\r\\n            </ion-row>            \\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n      </ion-col>      \\r\\n    </ion-row>\\r\\n    <p class=\\\"ion-text-center\\\"  *ngIf=\\\"loading\\\">\\r\\n      <ion-spinner  name=\\\"circles\\\"></ion-spinner>\\r\\n    </p>\\r\\n    <ion-row  *ngIf=\\\"myDebts && myDebts.length > 0\\\">\\r\\n      <ion-col>\\r\\n        <p>{{PAYMENT_TICK_MSG | translate}}</p>\\r\\n        <ion-list >\\r\\n          <ion-item *ngFor=\\\"let debt of myDebts; let i=index\\\">\\r\\n            <ion-checkbox (ionChange)=\\\"checkEvent($event, i)\\\" color=\\\"primary\\\" slot=\\\"start\\\"></ion-checkbox>\\r\\n            <ion-label>\\r\\n              <p>                \\r\\n                <span class=\\\"ion-float-left\\\"><small>{{ 'DATE_TEXT' | translate }}: </small>{{  debt && debt.date_debut ? (debt.date_debut.split(' ')[0] | date :'mediumDate') : ''}}</span>\\r\\n                <span class=\\\"ion-float-right\\\"><b><small>{{ 'CYCLE_TEXT' | translate }}/{{'SESSION_TEXT' | translate}}: </small>{{ debt && debt.numero_cycle ? debt && debt.numero_cycle : 0 }}/{{ debt && debt.numero_seance ? debt.numero_seance : 0 }}</b></span> \\r\\n              </p>\\r\\n              <h3>{{ debt && debt.description ? (debt.description | translate) : ''}}</h3> \\r\\n              <p>\\r\\n                <ion-text class=\\\"ion-float-left\\\" color=\\\"warning\\\"><span>{{ debt && debt.montant ? (debt.montant | commadumper) : 0 }}  {{debt.device }}</span></ion-text>\\r\\n                <ion-text class=\\\"ion-float-right\\\" color=\\\"dark\\\"><span>{{ \\\"SHARE_ID_TEXT\\\" | translate }} :  {{debt.numero_part}} </span></ion-text>\\r\\n              </p>\\r\\n              <ion-text color=\\\"dark\\\" *ngIf=\\\"debt.typecontribution_id === 1\\\"><strong >{{ \\\"TYPE_TEXT\\\" | translate }} : </strong> {{debt.type_penalite === 'retard' ? ('PENALITY_RETARD' | translate) : ('PENALITY_ABSENCE' | translate)}} </ion-text>\\r\\n            </ion-label>            \\r\\n          </ion-item>\\r\\n        </ion-list>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n\\r\\n  <div  *ngIf=\\\"myDebts && myDebts.length === 0  && !loading\\\">\\r\\n    <p class=\\\"ion-padding ion-text-center\\\" >{{ 'PAYMENT_TICK_EMPTY_MSG' | translate}}</p>\\r\\n  </div>\\r\\n\\r\\n\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"infinteScrollData($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"bubbles\\\"\\r\\n      loadingText=\\\"{{ 'M_LOADING_MORE_DATA' | translate }}\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding ion-text-center\\\">\\r\\n  <ion-row>\\r\\n    <ion-col *ngIf=\\\"myDebts && myDebts.length === 0  && !loading\\\">\\r\\n      <ion-button expand=\\\"full\\\"  color=\\\"warning\\\" \\r\\n      class=\\\"ion-text-uppercase\\\"\\r\\n      shape=\\\"round\\\"\\r\\n      (click)=\\\"debtInProgress()\\\">\\r\\n      {{'DEBTS_IN_PROCESS' | translate }}\\r\\n    </ion-button>\\r\\n    </ion-col>\\r\\n    <ion-col  *ngIf=\\\"totalPay != 0\\\">\\r\\n      <ion-button expand=\\\"full\\\" [disabled]=\\\"!currentCurrency && totalPay === 0\\\"\\r\\n      color=\\\"warning\\\" \\r\\n      class=\\\"ion-text-uppercase\\\"\\r\\n      shape=\\\"round\\\"\\r\\n      (click)=\\\"processPayment()\\\">\\r\\n{{ 'PROCESS_PAYMENT' | translate }} {{ (totalPay | commadumper) }}  {{currentTontine.tontine.monnaie }} <span class=\\\"ion-text-lowercase\\\">({{ + itemsList.length + ('DEBT_TEXT' | translate) }})</span>\\r\\n</ion-button>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n  <p *ngIf=\\\"loadingPay\\\" class=\\\"ion-text-center ion-padding\\\">\\r\\n    <ion-spinner  name=\\\"circles\\\"></ion-spinner>\\r\\n  </p>\\r\\n</ion-footer>\\r\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DuePage } from './due.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DuePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    SharedModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DuePage]\n})\nexport class DuePageModule {}\n"],"sourceRoot":"webpack:///"}