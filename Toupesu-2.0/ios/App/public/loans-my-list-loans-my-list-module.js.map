{"version":3,"sources":["./src/app/dashboard/my-tontines/tontine-detail/loans/loans-my-list/loans-my-list.page.html","./src/app/dashboard/my-tontines/tontine-detail/loans/loans-my-list/loans-my-list.page.ts","./src/app/dashboard/my-tontines/tontine-detail/loans/loans-my-list/loans-my-list.module.ts","./src/app/dashboard/my-tontines/tontine-detail/loans/loans-my-list/loans-my-list.page.scss"],"names":[],"mappings":"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","file":"loans-my-list-loans-my-list-module.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button color=\\\"primary\\\" [defaultHref]=\\\"['/','dashboard','my-tontines',currentTontine.tontine.tontine_id,'loans']\\\" slot=\\\"text-only\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-avatar slot=\\\"start\\\">\\r\\n        <ion-img [src]=\\\"'assets/join-icon.svg'\\\" class=\\\"thumb-img\\\"></ion-img>\\r\\n    </ion-avatar>\\r\\n    <ion-title class=\\\"no-padding\\\">\\r\\n      {{'MY_LOANS_TEXT' | translate}}\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"all-my-loans\\\">\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refreSher($event)\\\">\\r\\n    <ion-refresher-content\\r\\n      pullingIcon=\\\"reload-outline\\\"\\r\\n      refreshingSpinner=\\\"circles\\\"\\r\\n      refreshingText=\\\"{{ 'M_REFRESHING_TEXT' | translate }}\\\">\\r\\n    </ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  <p class=\\\"ion-text-center\\\"  *ngIf=\\\"loading\\\">\\r\\n    <ion-spinner  name=\\\"circles\\\"></ion-spinner>\\r\\n  </p>\\r\\n\\r\\n  <ion-grid *ngIf=\\\"!loading\\\">\\r\\n    <div class=\\\"block-1\\\">\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-label class=\\\"ion-padding-vertical\\\">\\r\\n              <strong><small>{{ 'CYCLE_TEXT' | translate }}/{{ 'SESSION_TEXT' | translate }} \\r\\n                : {{infoCycle ? infoCycle.numerocycle : 0}}/ {{infoSeance ? infoSeance.numero_seance : 0}}</small></strong>           \\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row class=\\\"row-1\\\">\\r\\n        <ion-col size=\\\"4\\\" class=\\\"ion-text-center\\\">\\r\\n          <b>{{ 'LOANS_TEXT' | translate }}<br/> {{ 'DUE_TEXT' | translate }} ({{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }})</b><br/>\\r\\n          {{getLoanDueAmount()}}\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"4\\\" class=\\\"ion-text-center\\\">\\r\\n          <b>{{ 'LOANS_TEXT' | translate }}<br/> {{ 'PAIDED_TEXT' | translate }} ({{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }})</b><br/> \\r\\n          {{getLoanPaidAmount()}}\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"4\\\" class=\\\"ion-text-center\\\">\\r\\n          <b>{{ 'LOANS_TEXT' | translate }}<br/> {{ 'REMAIN_TEXT' |  translate }} ({{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }}) </b> : <br/> \\r\\n          {{getLoanRemainAmount()}} \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </div>\\r\\n    <div class=\\\"block-2\\\">\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\" size-md>\\r\\n          <ion-text color=\\\"primary\\\"><h4 class=\\\"ion-no-margin\\\">{{ 'LOANS_GRAPH_TEXT' | translate}}</h4></ion-text>      \\r\\n          <div class=\\\"donut-wrap\\\">\\r\\n            <div  [class]=\\\"(getPercentage(getLoanPaidPercentage()))\\\">\\r\\n              <div class=\\\"donut-text\\\">\\r\\n                <small>{{ 'INTEREST_GENERATE' | translate }}({{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }})</small>\\r\\n                <p>{{getInterestGenerate() }}</p>\\r\\n              </div>\\r\\n            </div>\\r\\n            <span class=\\\"tooltip\\\" tooltip=\\\"(getLoanPaidPercentage())%\\\">{{ 'PAID_TEXT' | translate }}</span>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\" size-md>\\r\\n          <div class=\\\"donut-legend ion-padding-horizontal\\\">\\r\\n            <p class=\\\"legend-color1\\\"><small>{{ 'LOAN_TEXT' | translate }}  {{ 'PAID_TEXT' | translate }}:</small> <br/> <span>{{getLoanPaidPercentage()}}%</span> </p>\\r\\n            <p class=\\\"legend-color2\\\"><small>{{ 'LOAN_TEXT' | translate }} {{ 'REMAIN_TEXT' |  translate }}:</small><br/> <span>{{getLoanRemainPercentage()}}%</span></p>\\r\\n            <p *ngIf=\\\"currentLoan && currentLoan.interest_target\\\"><small>{{ 'INTEREST_TARGET' | translate }}: </small> <span class=\\\"font-weight-bolder\\\">{{currentLoan ? (currentLoan.interest_target | commadumper) + ' ' + (currentTontine.tontine ? currentTontine.tontine.monnaie : '') : ('NOT_SET' | translate)}}</span> </p>\\r\\n            <p *ngIf=\\\"currentTontine && currentTontine.tontine && currentTontine.tontine.type_of_target_loan\\\"><small>{{ 'LOAN_TARGET_PER_CYCLE' | translate }}: </small> <span class=\\\"font-weight-bolder\\\">{{currentTontine.tontine ? (currentTontine.tontine.value_type_of_target | commadumper) + ' ' + ( currentTontine.tontine ? currentTontine.tontine.monnaie : '') : ('NOT_SET' | translate)}}</span> </p>\\r\\n            <p><small>{{ 'DAYS_LEFT_TEXT' | translate }}: </small> <span class=\\\"font-weight-bolder\\\">{{currentLoan ? currentLoan.days_left : 0}}</span> </p>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </div>\\r\\n    <div class=\\\"block-3\\\">\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-text color=\\\"primary\\\"><h4 class=\\\"ion-no-margin\\\">{{ 'CREDIT_LINE_APPROVE_TEXT' | translate }} ({{allData ? allData.length  : 0}})</h4></ion-text> \\r\\n          <ion-list>\\r\\n            <ion-item  *ngFor=\\\"let item of currentLoanData\\\" [routerLink]=\\\"['/', 'dashboard', 'my-tontines', currentTontine.tontine.tontine_id, 'loans', 'my-loans', item.infos_cycle.id, item.infos_seance.id]\\\" detail>\\r\\n              <ion-label>\\r\\n                <p>                \\r\\n                  <span class=\\\"ion-float-left\\\"><small>{{ 'CYCLE_TEXT' | translate }}/{{ 'SESSION_TEXT' | translate }}  </small>{{item.infos_cycle.numerocycle}}/{{item.infos_seance.numero_seance}}</span>\\r\\n                  <span class=\\\"ion-float-right\\\"><b><small> {{ 'DATE_TEXT' | translate }}: </small>{{item && item.infos_seance ? (item.infos_seance.date_debut | toDateObj | date : 'mediumDate') : '' }}</b></span> \\r\\n                </p>\\r\\n                <ion-text color=\\\"primary\\\"><h2><small> {{ 'AMOUNT_TEXT' | translate }}:</small> {{item ? (getLoanSeanceAmount(item) | commadumper) : 0 }} {{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }} </h2></ion-text>  \\r\\n                <ion-text color=\\\"dark\\\"><h3>(<small>{{ 'INTEREST_DUE_TEXT' | translate }}:</small> {{item ? (getInterestDueAmount(item) | commadumper) : 0 }} {{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }})</h3></ion-text>  \\r\\n                <p>                \\r\\n                  <span class=\\\"ion-float-left\\\"><small> {{ 'PAID_TEXT' | translate }} : </small> {{item ? (item.loan_paid | commadumper) : 0 }} {{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }}</span>\\r\\n                  <span class=\\\"ion-float-right\\\"><ion-text color=\\\"danger\\\"><b><small>{{ 'REMAIN_TEXT' |  translate }}: </small>{{item ? (item.loan_remain | commadumper) : 0 }} {{currentTontine && currentTontine.tontine ? currentTontine.tontine.monnaie : '' }}</b></ion-text></span> \\r\\n                </p>\\r\\n              </ion-label>\\r\\n            </ion-item>\\r\\n       \\r\\n          </ion-list>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </div>\\r\\n  </ion-grid>\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"250px\\\" (ionInfinite)=\\\"infinteScrollData($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"bubbles\\\"\\r\\n      loadingText=\\\"{{ 'M_LOADING_MORE_DATA' | translate }}\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { IonInfiniteScroll } from '@ionic/angular';\r\nimport { ApiService } from 'src/app/shared/service/api.service';\r\nimport { ErrorService } from 'src/app/shared/service/error.service';\r\nimport { LoanErrorService } from 'src/app/dashboard/my-tontines/tontine-detail/loans/service/loan-error.service';\r\nimport { TontineService } from '../../../services/tontine.service';\r\nimport { LoanGlobalDataService } from '../service/loan-global-data.service';\r\nimport { LoanService } from '../service/loan.service';\r\nimport { EventService } from 'src/app/shared/service/events.service';\r\nimport { UtilService } from 'src/app/shared/service/util.service';\r\n\r\n@Component({\r\n  selector: 'app-loans-my-list',\r\n  templateUrl: './loans-my-list.page.html',\r\n  styleUrls: ['./loans-my-list.page.scss'],\r\n})\r\nexport class LoansMyListPage implements OnInit {\r\n\r\n  currentTontine: any;\r\n  loading: boolean;\r\n  currentLoan: any;\r\n  creditLineApprove: any;\r\n  creditLineApprovePaid: any;\r\n  currentLoanData: any;\r\n  interestsDue: any;\r\n  infoSeance: any;\r\n  infoCycle: any;\r\n  allData: any;\r\n  nbItems: number;\r\n  @ViewChild(IonInfiniteScroll, { static: false }) infiniteScroll: IonInfiniteScroll;\r\n\r\n  constructor(\r\n    private tontine: TontineService,\r\n    private api: ApiService,\r\n    private util: UtilService,\r\n    private events: EventService,\r\n    private loanService: LoanService,\r\n    private loanData: LoanGlobalDataService,\r\n    private loanError: LoanErrorService,\r\n    private error: ErrorService\r\n  ) {\r\n    this.currentTontine = this.tontine.getCurrentTontineData();\r\n    this.currentLoan = null;\r\n    this.creditLineApprove = [];\r\n    this.creditLineApprovePaid = [];\r\n    this.interestsDue = [];\r\n    this.infoSeance = null;\r\n    this.infoCycle = null;\r\n    this.loading = false;\r\n    this.allData = [];\r\n    this.nbItems = 10;\r\n    this.events.subscribe('loans-paid', () => {\r\n      this.loading = true;\r\n      this.getLoanData(null);\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loading = true;\r\n    this.getLoanData(null);\r\n  }\r\n\r\n  // Get the loans data\r\n  getLoanData(event: any) {\r\n    if (this.currentTontine && this.currentTontine.cycle_courant) {\r\n      const param = {\r\n        tontine_id: this.currentTontine.tontine.tontine_id,\r\n        cycle_id: this.currentTontine.cycle_courant.id\r\n      };\r\n      this.loanService.getMemberLoanDashBordCycle(param).subscribe((data: any) => {\r\n\r\n        if (data && data.message === 'success' && data.liste_my_loan.length > 0) {\r\n          this.allData = this.util.orderBySeanceKeyUp(data.liste_my_loan);\r\n          this.currentLoan = this.allData[0];\r\n          this.infoSeance = this.currentLoan.infos_seance;\r\n          this.infoCycle = this.currentLoan.infos_cycle;\r\n\r\n          if (this.allData.length > this.nbItems) {\r\n            this.currentLoanData = [];\r\n            for (let i = 0; i < this.nbItems; i++) {\r\n              this.currentLoanData.push(this.allData[this.currentLoanData.length]);\r\n            }\r\n          } else {\r\n            this.currentLoanData = this.allData;\r\n          }\r\n        }\r\n        this.loading = false;\r\n        if (event) {\r\n          setTimeout(() => {\r\n            event.target.complete();\r\n          }, 2000);\r\n        }\r\n      }, error => {\r\n        if (event) {\r\n          event.target.complete();\r\n        }\r\n        this.loading = false;\r\n        if (error && error.error && error.error.message === \"error\") {\r\n          if (error && error.error && error.error.user_not_found) {\r\n            this.loading = true;\r\n            this.error.renewSession().then((data: any) => {\r\n              if (data && data.result === 'OK') {\r\n                this.getLoanData(event);\r\n              } else {\r\n                this.loading = false;\r\n              }\r\n            });\r\n          } else {\r\n            this.loanError.manageLoanError(error);\r\n          }\r\n        } else {\r\n          this.error.manageError(error);\r\n        }\r\n      });\r\n    } else {\r\n      if (event) {\r\n        event.target.complete();\r\n      }\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  // Refresh the list\r\n  refreSher(event) {\r\n    this.infiniteScroll.disabled = false;\r\n    this.getLoanData(event);\r\n  }\r\n\r\n  // get the cumule of loan due\r\n  getLoanDueAmount() {\r\n    return this.loanData.getLoanDueAmount(this.allData);\r\n  }\r\n\r\n  // get the cumule of loan paid\r\n  getLoanPaidAmount() {\r\n    return this.loanData.getLoanPaidAmount(this.allData);\r\n  }\r\n\r\n  // get the cumule of loan remain\r\n  getLoanRemainAmount() {\r\n    const loanDue = this.getLoanDueAmount();\r\n    const loanPaid = this.getLoanPaidAmount();\r\n    return loanDue - loanPaid;\r\n\r\n  }\r\n\r\n  // get interest generate\r\n  getInterestGenerate() {\r\n    return this.loanData.getInterestGenerate(this.allData);\r\n  }\r\n\r\n  // get loan paid percentage\r\n  getLoanPaidPercentage() {\r\n    const loanPaid = this.getLoanPaidAmount();\r\n    const loanDue = this.getLoanDueAmount();\r\n    return loanDue > 0 ? parseFloat(Number((loanPaid / loanDue) * 100).toFixed(0)) : 0;\r\n  }\r\n\r\n\r\n  // get loan paid percentage\r\n  getLoanRemainPercentage() {\r\n    let loanPaidPercent: number = this.getLoanPaidPercentage();\r\n    return (100 - loanPaidPercent);\r\n  }\r\n\r\n  // Get all amount of a loan seance\r\n  getLoanSeanceAmount(loanDue: any) {\r\n    return this.loanData.getLoanSeanceAmount(loanDue);\r\n  }\r\n\r\n  // Get all amount of a loan seance\r\n  getInterestDueAmount(loanDue: any) {\r\n    return this.loanData.getInterestDueAmount(loanDue);\r\n  }\r\n\r\n  // Infinite scroll data\r\n  infinteScrollData(event) {\r\n    setTimeout(() => {\r\n      for (let i = 0; i < this.nbItems; i++) {\r\n        if (this.currentLoanData.length < this.allData.length) {\r\n          this.currentLoanData.push(this.allData[this.currentLoanData.length]);\r\n        } else if (this.currentLoanData.length === this.allData.length) {\r\n          event.target.disabled = true;\r\n        }\r\n      }\r\n      event.target.complete();\r\n    }, 500);\r\n  }\r\n\r\n  getPercentage(data: number) {\r\n    return this.loanService.getPercentage(data);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoansMyListPage } from './loans-my-list.page';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoansMyListPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LoansMyListPage]\r\n})\r\nexport class LoansMyListPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2Fucy1teS1saXN0LnBhZ2Uuc2NzcyJ9 */\";"],"sourceRoot":"webpack:///"}