{"version":3,"sources":["./src/app/dashboard/my-tontines/tontine-detail/wallet/top-up/top-up.module.ts","./src/app/dashboard/my-tontines/tontine-detail/wallet/top-up/top-up.page.ts","./src/app/dashboard/my-tontines/tontine-detail/wallet/top-up/top-up.page.scss","./src/app/dashboard/my-tontines/tontine-detail/wallet/top-up/top-up.page.html"],"names":[],"mappings":"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","file":"wallet-top-up-top-up-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TopUpPage } from './top-up.page';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TopUpPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SharedModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [TopUpPage]\r\n})\r\nexport class TopUpPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { WalletTontineService } from '../services/wallet-tontine.service';\r\nimport { TontineService } from '../../../services/tontine.service';\r\nimport { ErrorService } from 'src/app/shared/service/error.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { StorageData } from 'src/app/shared/service/storage.service';\r\nimport { UiService } from 'src/app/shared/service/ui.service';\r\n\r\n@Component({\r\n  selector: 'app-top-up',\r\n  templateUrl: './top-up.page.html',\r\n  styleUrls: ['./top-up.page.scss'],\r\n})\r\nexport class TopUpPage implements OnInit {\r\n\r\n  loading: boolean;\r\n  currentTontine: any;\r\n  walletTontines: any;\r\n  constructor(\r\n    private tontine: TontineService,\r\n    private error: ErrorService,\r\n    private storage: StorageData,\r\n    private translate: TranslateService,\r\n    private ui: UiService,\r\n    private walletTontine: WalletTontineService \r\n  ) {\r\n      this.loading = false;\r\n      this.currentTontine = this.tontine.getCurrentTontineData();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loading= true;\r\n    this.getWalletData(null);\r\n  }\r\n\r\n\r\n  // Get the wallet data\r\n  getWalletData(event) {\r\n    const param = {tontine_id: this.currentTontine.tontine.tontine_id};\r\n    this.walletTontine.getTontineWallet(param).subscribe((reponse: any) => {\r\n        if (reponse && reponse.message === 'success') {\r\n            this.walletTontines = reponse.infos_wallet;\r\n            this.storage.set(`tontine-wallet${param.tontine_id}`, { solde: this.walletTontines, caisse: reponse.detail_caisse });\r\n        }\r\n        if (event) {\r\n          event.target.complete();\r\n        }\r\n        this.loading= false;\r\n    }, error => {\r\n        this.loading= false;\r\n        if (event) {\r\n          event.target.complete();\r\n        }\r\n    \r\n        if (error && error.error && error.error.message === 'error') {\r\n          if (error.error.tontine_id_not_exist) {\r\n            this.translate.get('ADD_SHARE_MSG4').subscribe(trans => {\r\n              this.ui.presentToast(trans);\r\n            });\r\n           }\r\n\r\n          if (error.error.user_not_found) {\r\n            this.loading = true;\r\n            this.error.renewSession().then((data: any) => {\r\n              if (data && data.result === 'OK') {\r\n                this.getWalletData(event);\r\n              } else {\r\n                this.loading = false;\r\n                this.storage.get(`tontine-wallet${param.tontine_id}`).then(walletData => {\r\n                  this.walletTontines = walletData ? walletData.solde : [];\r\n                }); \r\n              }\r\n             });\r\n          }\r\n   \r\n        } else {\r\n          this.storage.get(`tontine-wallet${param.tontine_id}`).then(walletData => {\r\n            this.walletTontines = walletData ? walletData.solde : [];\r\n          }); \r\n          this.error.manageError(error);\r\n        }\r\n    });\r\n  }\r\n\r\n  // refresh the wallet\r\n   refreSher(event) {\r\n    this.getWalletData(event);\r\n   }\r\n\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0b3AtdXAucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button color=\\\"primary\\\" [defaultHref]=\\\"'/dashboard/my-tontines/'+ currentTontine.tontine.tontine_id +'/wallet'\\\" slot=\\\"text-only\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"no-padding ion-text-center\\\">\\r\\n      {{ 'WALLET_TEXT' | translate }} <small *ngIf=\\\"walletTontines && walletTontines[0] && walletTontines[0].currency_name\\\">({{walletTontines[0].currency_name}})</small>\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar class=\\\"ion-text-center subtitle\\\">\\r\\n    <ion-title><ion-text color=\\\"primary\\\" class=\\\"ion-text-capitalize\\\">{{ 'TONTINE_LIST_TEXT10' | translate }}</ion-text></ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"tontine-topup\\\">\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"refreSher($event)\\\">\\r\\n    <ion-refresher-content\\r\\n      pullingIcon=\\\"arrow-dropdown\\\"\\r\\n      refreshingSpinner=\\\"circles\\\"\\r\\n      refreshingText=\\\"{{ 'M_REFRESHING_TEXT' | translate }}\\\">\\r\\n    </ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  <p class=\\\"ion-text-center\\\"  *ngIf=\\\"loading\\\">\\r\\n    <ion-spinner  name=\\\"circles\\\"></ion-spinner>\\r\\n  </p>\\r\\n  <ion-row>\\r\\n    <ion-col>\\r\\n      <ion-col class=\\\"ion-no-padding\\\">\\r\\n        <ion-card class=\\\"block-1\\\">\\r\\n          <ion-card-content class=\\\"ion-text-center\\\">\\r\\n            <ion-row>\\r\\n              <ion-col size=\\\"auto\\\" class=\\\"align-self-center\\\">\\r\\n                <span class=\\\"desc\\\">{{ 'WALLET_TEXT2' | translate }} </span>\\r\\n              </ion-col>\\r\\n              <ion-col class=\\\"col-button\\\">                  \\r\\n                <div class=\\\"menu-amount\\\"><span *ngIf=\\\"walletTontines && walletTontines[0] && walletTontines[0].currency_name\\\">{{walletTontines && walletTontines[0] ? walletTontines[0].total_balance : 0}} {{walletTontines[0].currency_name}}</span> </div>\\r\\n              </ion-col>\\r\\n            </ion-row>            \\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n      </ion-col>     \\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n  <app-paidmode-tontine></app-paidmode-tontine>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}