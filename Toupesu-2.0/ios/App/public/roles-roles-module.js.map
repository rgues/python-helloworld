{"version":3,"sources":["./src/app/dashboard/my-tontines/tontine-detail/roles/roles.page.html","./src/app/dashboard/my-tontines/tontine-detail/roles/roles.module.ts","./src/app/dashboard/my-tontines/tontine-detail/roles/roles-edit/roles-edit.component.html","./src/app/dashboard/my-tontines/tontine-detail/roles/roles.page.scss","./src/app/dashboard/my-tontines/tontine-detail/roles/roles-edit/roles-edit.component.ts","./src/app/dashboard/my-tontines/tontine-detail/roles/roles.page.ts","./src/app/dashboard/my-tontines/tontine-detail/roles/roles-edit/roles-edit.component.scss"],"names":[],"mappings":"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","file":"roles-roles-module.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button color=\\\"primary\\\" [defaultHref]=\\\"'/dashboard/my-tontines/' + myTontine.tontine_id\\\" slot=\\\"text-only\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"no-padding ion-text-center\\\">\\r\\n      {{ 'ROLES_TEXT' | translate }}\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"detail-share\\\">\\r\\n  <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n            <ion-img class=\\\"inner-image\\\" [src]=\\\"'assets/members.svg'\\\"></ion-img>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n          <ion-col>\\r\\n            <ion-list>\\r\\n              <ion-item>\\r\\n                <p><b>{{ 'NB_ADMINISTRATOR' | translate }} : </b>{{ myTontine.number_admin_current || 0 }}</p>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                <p><b>{{ 'NB_MAX_ADMINISTRATOR' | translate }} : </b>{{ myTontine.number_admin_max || 0 }}</p>\\r\\n              </ion-item>\\r\\n              <ion-item>\\r\\n                <p><b>{{ 'NB_VALIDATORS' | translate }} : </b> {{ myTontine.number_admin_that_validates_contributions || 0 }} </p>\\r\\n              </ion-item>\\r\\n            </ion-list>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n    </ion-grid>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding ion-text-center\\\"  *ngIf=\\\"canEditRole()\\\">\\r\\n  <ion-button expand=\\\"full\\\"\\r\\n        color=\\\"warning\\\" \\r\\n        class=\\\"ion-text-uppercase\\\"\\r\\n        shape=\\\"round\\\"\\r\\n        (click)=\\\"openShareEdit()\\\">\\r\\n        {{ 'EDIT_TEXT' | translate }}\\r\\n  </ion-button>\\r\\n</ion-footer>\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { RolesEditComponent } from './roles-edit/roles-edit.component';\r\nimport { RolesPage } from './roles.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RolesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [\r\n    RolesPage,\r\n    RolesEditComponent\r\n  ],\r\n  entryComponents: [\r\n    RolesEditComponent\r\n  ]\r\n})\r\nexport class RolesPageModule {}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title class=\\\"ion-text-center\\\">{{ 'MANAGE_ROLE' | translate }}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <form [formGroup]=\\\"rolesEditForm\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"floating\\\">{{ 'NB_MAX_ADMINISTRATOR' | translate }}</ion-label>\\r\\n            <ion-input type=\\\"number\\\" formControlName=\\\"number_admin_max\\\" required=\\\"true\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n\\r\\n        <div class=\\\"validation-errors\\\">\\r\\n            <div class=\\\"error-message\\\"\\r\\n              *ngIf=\\\"nbAdminMax.valid && (rolesEditForm.value.number_admin_max <  rolesEditForm.value.number_admin_current)\\\">\\r\\n              <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\r\\n              {{'ADMIN_ERROR_MSG' | translate }}\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <ion-col size=\\\"12\\\" >\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"floating\\\">{{ 'NB_VALIDATORS' | translate }}</ion-label>\\r\\n            <ion-select  formControlName=\\\"number_admin_that_validates_contributions\\\">\\r\\n              <ion-select-option *ngFor=\\\"let val of nbValidatorsList\\\" [value]=\\\"val\\\">{{ val }}\\r\\n              </ion-select-option>\\r\\n            </ion-select>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding ion-text-center\\\">\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <ion-button expand=\\\"full\\\" color=\\\"warning\\\" class=\\\"ion-text-uppercase\\\"\\r\\n          [disabled]=\\\"loading || rolesEditForm.invalid || rolesEditForm.value.number_admin_max <  rolesEditForm.value.number_admin_current\\\"\\r\\n          (click)=\\\"updateRoles()\\\" shape=\\\"round\\\">\\r\\n          {{ 'SAVE_TEXT' | translate }}\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col>\\r\\n        <ion-button expand=\\\"full\\\" fill=\\\"outline\\\" color=\\\"warning\\\" class=\\\"ion-text-uppercase\\\" shape=\\\"round\\\"\\r\\n          (click)=\\\"closeShareEdit('cancel')\\\">\\r\\n          {{ 'CANCEL_TEXT' | translate }}\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <p class=\\\"ion-text-center\\\">\\r\\n      <ion-spinner *ngIf=\\\"loading\\\" name=\\\"circles\\\"></ion-spinner>\\r\\n    </p>\\r\\n  </ion-grid>\\r\\n</ion-footer>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyb2xlcy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { TontineService } from '../../../services/tontine.service';\r\nimport { ErrorService } from 'src/app/shared/service/error.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { TontineErrorService } from 'src/app/dashboard/my-tontines/services/tontine-error.service';\r\nimport { UiService } from 'src/app/shared/service/ui.service';\r\nimport { EventService } from 'src/app/shared/service/events.service';\r\n\r\n@Component({\r\n  selector: 'app-roles-edit',\r\n  templateUrl: './roles-edit.component.html',\r\n  styleUrls: ['./roles-edit.component.scss'],\r\n})\r\nexport class RolesEditComponent implements OnInit {\r\n\r\n  rolesEditForm: FormGroup;\r\n\r\n  loading: boolean;\r\n  tontineData:any;\r\n  types: any[];\r\n  nbValidatorsList: number [];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private modatCtrl: ModalController,\r\n    private tontine: TontineService,\r\n    private events: EventService,\r\n    private error: ErrorService,\r\n    private translate: TranslateService,\r\n    private tontineError: TontineErrorService,\r\n    private ui: UiService\r\n  ) { \r\n      this.loading = false;\r\n      this.types = [{ name: '%', value: 'pourcentage' }, { name: 'value', value: 'valeur' }];\r\n      this.tontineData = this.tontine.getCurrentTontineData();\r\n      this.nbValidatorsList = [];\r\n      this.getNbValidators();\r\n  }\r\n\r\n  ngOnInit() {\r\n     this.InitRolesInformation();\r\n  }\r\n\r\n  closeShareEdit(response) {\r\n    this.modatCtrl.dismiss(response, 'cancel');\r\n  }\r\n\r\n  // Init the tontine form\r\n  InitRolesInformation() {\r\n    let formData = this.tontine.getCurrentTontineData();\r\n    this.rolesEditForm = this.fb.group({\r\n      tontine_id: [formData.tontine.tontine_id],\r\n      number_admin_max: [formData.tontine.number_admin_max, Validators.compose([Validators.required, Validators.pattern('^[\\\\d]+$')])],\r\n      number_admin_current: [formData.tontine.number_admin_current],\r\n      number_admin_that_validates_contributions: [formData.tontine.number_admin_that_validates_contributions, Validators.compose([Validators.required, Validators.pattern('^[\\\\d]+$')])],\r\n      type_number_admin_that_validates_contributions: [this.types[1].value, Validators.required]\r\n    });\r\n  }\r\n\r\n  // Nb admins max\r\n  get nbAdminMax() {\r\n    return this.rolesEditForm.get('number_admin_max');\r\n  }\r\n\r\n  // Numbers of validators\r\n  get nbValidators() {\r\n    return this.rolesEditForm.get('number_admin_that_validates_contributions');\r\n  }\r\n\r\n  // Get the numbers of validators\r\n  getNbValidators() {\r\n    this.nbValidatorsList = [];\r\n    const nbVal =   this.tontineData.tontine.number_admin_current;\r\n    for (let i= 1; i <= nbVal; i++ ) {\r\n      this.nbValidatorsList.push(i);\r\n    }\r\n  }\r\n\r\n   // Update tontine share\r\n   updateRoles() {\r\n   \r\n    this.loading = true;\r\n    this.tontine.updateAdminValidator(this.rolesEditForm.value).subscribe(\r\n      (reponse: any) => {\r\n        this.loading = false;\r\n        if (reponse && reponse.message === 'success') {\r\n          this.translate.get('M_TONTINE_SUCCESSFUL_UPDATED').subscribe(trans => {\r\n            this.ui.presentToast(trans);\r\n          });\r\n          this.events.publish('new-tontine');\r\n          this.closeShareEdit('success');\r\n        }\r\n      }, error => {\r\n       \r\n        if (error && error.error && error.error.message === 'error') {\r\n          if (error && error.error && error.error.user_not_found){\r\n            this.error.renewSession().then((data: any) => {\r\n                if (data && data.result === \"OK\") {\r\n                      this.updateRoles();\r\n                } else {\r\n                  this.loading = false;\r\n                  this.closeShareEdit('cancel');\r\n                }\r\n            });\r\n        } else  {\r\n          this.loading = false;\r\n          this.closeShareEdit('cancel');\r\n          this.tontineError.manageTontineError(error);\r\n        }\r\n               \r\n        } else {\r\n          this.loading = false;\r\n          this.closeShareEdit('cancel');\r\n          this.error.manageError(error);\r\n        }\r\n      });\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TontineService } from '../../services/tontine.service';\r\nimport { ErrorService } from 'src/app/shared/service/error.service';\r\nimport { RolesEditComponent } from './roles-edit/roles-edit.component';\r\nimport { UserService } from 'src/app/dashboard/user/service/user.service';\r\n\r\n@Component({\r\n  selector: 'app-roles',\r\n  templateUrl: './roles.page.html',\r\n  styleUrls: ['./roles.page.scss'],\r\n})\r\nexport class RolesPage implements OnInit {\r\n\r\n  tontineId: number;\r\n  user: any;\r\n  myTontine: any;\r\n  currentSeance: any;\r\n  members: any;\r\n  bid: any;\r\n  seance: any;\r\n  previousSeance: any;\r\n  cycle: any;\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private activeRoute: ActivatedRoute,\r\n    private tontine: TontineService,\r\n    private modatCtrl: ModalController,\r\n    private errorService: ErrorService\r\n  ) {\r\n    this.tontineId = this.activeRoute.snapshot.params.tontineId;\r\n    this.user = this.userService.getUserData();\r\n    const tontineData = this.tontine.getCurrentTontineData();\r\n    this.myTontine = tontineData.tontine;\r\n    this.currentSeance = tontineData.seance_courante;\r\n    this.members = tontineData.membres;\r\n    this.bid = tontineData.tontine;\r\n    this.seance = tontineData.seance_courante;\r\n    this.previousSeance = tontineData.avant_derniere_seance;\r\n    this.cycle = tontineData.cycle_courant;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  // Can edit role \r\n  canEditRole() {\r\n    let canEdit = false;\r\n   if (((!this.seance && this.myTontine.active === 0) || (!this.seance && !this.previousSeance && this.myTontine.active === 1) || \r\n    (this.seance && this.seance.numero_seance < 2 && this.myTontine.active === 1)) && this.myTontine.administrator === 1) {\r\n      canEdit = true;\r\n    }\r\n    return canEdit\r\n  }\r\n\r\n  openShareEdit() {\r\n    this.modatCtrl\r\n      .create({\r\n        component: RolesEditComponent\r\n      })\r\n      .then( modalEl => {\r\n        modalEl.present();\r\n\r\n        modalEl.onDidDismiss().then(res =>{\r\n            if (res.data === 'success') {\r\n              this.tontine.getTontineDetail(this.myTontine.tontine_id).subscribe((reponse: any) => {\r\n\r\n                if (reponse.infos_tontine && reponse.infos_tontine.length > 0) {\r\n                    this.tontine.setCurrentTontineData(reponse.infos_tontine[0]);\r\n                    const tontineData = this.tontine.getCurrentTontineData();\r\n                    this.myTontine = tontineData.tontine;\r\n                }\r\n\r\n              }, error => {\r\n                if (error && error.error && error.error.user_not_found){\r\n                  this.errorService.renewSession();\r\n              } else {\r\n                  this.errorService.manageError(error);\r\n              }\r\n              });\r\n            }\r\n        });\r\n      \r\n      });\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyb2xlcy1lZGl0LmNvbXBvbmVudC5zY3NzIn0= */\";"],"sourceRoot":"webpack:///"}